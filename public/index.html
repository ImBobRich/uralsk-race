<!DOCTYPE html>
<html>
<head><title>–£—Ä–∞–ª—å—Å–∫–∏–µ –°–∫–∞—á–∫–∏</title><meta name="viewport" content="width=device-width, initial-scale=1.0"></head>
<body>
    <div id="setup">
        <input type="text" id="name" placeholder="–ò–º—è –∫–æ–º–∞–Ω–¥—ã">
        <button onclick="join()">–í –∏–≥—Ä—É!</button>
    </div>
    <div id="game" style="display:none;">
        <h1>–¢—Ä—è—Å–∏ —Ç–µ–ª–µ—Ñ–æ–Ω!</h1>
        <div id="track" style="height: 300px; border: 1px solid #000; position: relative;"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        function join() {
            const name = document.getElementById('name').value;
            socket.emit('join', { name: name, color: 'red' });
            document.getElementById('setup').style.display = 'none';
            document.getElementById('game').style.display = 'block';
            
            // –¢–µ—Å—Ç –Ω–∞ –∫–ª–∏–∫ (–≤–º–µ—Å—Ç–æ —Ç—Ä—è—Å–∫–∏ –ø–æ–∫–∞)
            window.addEventListener('click', () => socket.emit('shake'));
        }

        socket.on('updatePlayers', (players) => {
            const track = document.getElementById('track');
            track.innerHTML = '';
            for (let id in players) {
                const p = players[id];
                track.innerHTML += `<div style="position:absolute; left:${p.pos}px; top:50px;">üêé ${p.name}</div>`;
            }
        });
    </script>
</body>
</html>
